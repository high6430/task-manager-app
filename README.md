# README.md 修正版 - 階層整理とバージョン日付修正

了解しました。階層を整理して、v1.0.0のリリース日を12/04に修正します。

---

```markdown
# PikaDo ⚡

自分用にカスタマイズできるタスク管理アプリ（Flutter / Android）

[![Download APK](https://img.shields.io/badge/Download-v1.0.1_APK-brightgreen?style=for-the-badge&logo=android)](https://github.com/high6430/task-manager-app/releases/download/v1.0.1/app-release.apk)
[![GitHub Release](https://img.shields.io/github/v/release/high6430/task-manager-app?style=for-the-badge&logo=github)](https://github.com/high6430/task-manager-app/releases)

![Flutter](https://img.shields.io/badge/Flutter-02569B?style=for-the-badge&logo=flutter&logoColor=white)
![Dart](https://img.shields.io/badge/Dart-0175C2?style=for-the-badge&logo=dart&logoColor=white)
![Android](https://img.shields.io/badge/Android-3DDC84?style=for-the-badge&logo=android&logoColor=white)

## 📋 プロジェクト概要

IT専門学校の卒業制作として開発した、個人のワークスタイルに合わせてカスタマイズできるタスク管理モバイルアプリケーション「PikaDo」です。

### 開発背景

既存のタスク管理アプリでは、以下の課題がありました：
- 機能が多すぎて使いこなせない
- 特定の用途に特化しすぎている
- 自分の管理スタイルに合わせられない

これらの課題を解決するため、「シンプルながら柔軟にカスタマイズでき、自分だけの使い方ができるタスク管理アプリ」を開発しました。

---

## ✨ 主な機能

### タスク管理
- **タスクの追加**: タイトル、締切日時、優先度、詳細を設定
- **タスクの編集・削除**: 既存タスクの修正・削除が可能（削除時は確認ダイアログ表示）
- **タスクのステータス管理**: 未対応 → 進行中 → 完了の3段階で管理
- **タスクの移動機能**: ボタン操作で簡単にステータス変更
- **タスク詳細表示**: 長押しで詳細情報を確認

### 通知機能
- **締切通知**: 設定した時刻に通知を送信
- **通知セット**: カスタム通知タイミングを作成・管理
  - 例：「前日20時」「当日朝8時」など
- **通知アクション**: 通知から直接タスクを完了・詳細確認
- **アプリ全体の通知ON/OFF**: 設定画面から一括制御
- **Android 13対応**: SCHEDULE_EXACT_ALARM権限に対応
- **Android 12以上対応**: 正確な時刻通知に対応

### ラベル管理
- **ラベルの作成**: 名前と色を選択してカスタムラベルを作成
- **複数ラベル対応**: 1つのタスクに複数のラベルを付与可能
- **ラベルフィルタ**: ラベルでタスクを絞り込み表示
- **初期ラベル**: 仕事（青）、私生活（緑）、緊急（赤）
- **自由なカスタマイズ**: 自分の管理スタイルに合わせてラベルを追加

### 視覚的な管理
- **優先度表示**: 高（赤）、中（オレンジ）、低（緑）の色分け
- **締切の色分け**: 
  - 🔴 期限切れ（赤）
  - 🟠 本日締切・時刻前（オレンジ）
  - 🔴 本日締切・時刻後（赤）
  - 🟢 余裕あり（緑）
- **タブUI**: 未対応・進行中・完了をタブで切り替え
- **ラベル表示**: 色付きチップでラベルを視覚的に表示

### データ管理
- **ローカル保存**: SharedPreferencesによる永続化
- **オフライン動作**: ネット接続不要で使用可能
- **自動ソート**: 締切順に自動整列

---

## 🛠️ 技術スタック

- **開発言語**: Dart
- **フレームワーク**: Flutter
- **データ管理**: SharedPreferences（JSON形式）
- **通知システム**: flutter_local_notifications
- **権限管理**: permission_handler
- **タイムゾーン**: timezone
- **対象プラットフォーム**: Android（iOS対応コード実装済み）
- **開発環境**: Visual Studio Code

### 主要パッケージ

```yaml
dependencies:
  flutter:
    sdk: flutter
  shared_preferences: ^2.0.0
  flutter_local_notifications: ^17.0.0
  permission_handler: ^11.0.0
  timezone: ^0.9.0
  cupertino_icons: ^1.0.8
```

---

## 📥 ダウンロード

### 最新版

| バージョン | リリース日 | ダウンロード |
|-----------|----------|-----------|
| **v1.0.1** | 2025/12/05 | [![Download](https://img.shields.io/badge/Download_APK-v1.0.1-brightgreen?style=flat-square)](https://github.com/high6430/task-manager-app/releases/download/v1.0.1/app-release.apk) |
| v1.0.0 | 2025/12/04 | [![Download](https://img.shields.io/badge/Download_APK-v1.0.0-blue?style=flat-square)](https://github.com/high6430/task-manager-app/releases/download/v1.0.0/app-release.apk) |

### インストール方法

1. 上記の「Download APK」ボタンをタップしてAPKをダウンロード
2. Android端末でAPKファイルを開く
3. 「提供元不明のアプリ」を許可
4. インストールをタップ

### 動作環境

- **Android**: 8.0以上
- **推奨**: Android 12以上（通知機能を最大活用できます）

### 初回起動時の権限設定

アプリ初回起動時に以下の2つの権限リクエストが表示されます。正常に通知を受け取るため、両方とも「許可」をタップしてください：

1. **通知の許可**（Android 13以上）
   - アプリから通知を送信するために必要

2. **アラームとリマインダー**（Android 12以上）
   - 正確な時刻に通知を送信するために必要

⚠️ 「許可しない」を選択した場合、通知が届きません。後から設定画面で有効化できます。

---

## 📲 クイックアクセス

### ダウンロード QR コード

**v1.0.1 APK をスマートフォンで直接ダウンロード**

![Download QR Code](assets/qrcodes/qr_download_v1.0.1.png)

スマートフォンのカメラまたは QR コードスキャナーアプリでスキャンすると、ダウンロードページに直接移動します。

### リポジトリ QR コード

**GitHub リポジトリへのアクセス**

![Repository QR Code](assets/qrcodes/qr_repository.png)

スマートフォンのカメラまたは QR コードスキャナーアプリでスキャンすると、GitHub リポジトリページに直接移動します。

---

## 🚀 トラブルシューティング

### 通知が届かない場合

#### 1. 権限設定を確認

**通知権限**
```
設定 → アプリ → PikaDo → 通知
「通知を許可する」がONになっているか確認
```

**アラーム権限**
```
設定 → アプリ → PikaDo → 権限 → アラームとリマインダー
有効化されているか確認
```

#### 2. バッテリー最適化を確認

```
設定 → バッテリー → バッテリー最適化
PikaDo を「最適化しない」に設定
```

#### 3. バックグラウンド実行を許可

```
設定 → アプリ → PikaDo → バッテリー
「バックグラウンドでの実行」を許可
```

#### 4. 省電力モードをOFF

通知が遅延する可能性があります

### ダウンロードエラーが出た場合

- ブラウザのキャッシュをクリア
- 別のWi-Fi/モバイルデータで試す
- ファイアウォールの設定を確認

### インストール後、アプリが起動しない場合

- 端末を再起動
- Google Play ストアから「Google Play開発者サービス」を更新
- アプリをアンインストール後、再度インストール

---

## 📂 プロジェクト構成

本プロジェクトは保守性と可読性を考慮し、機能ごとにファイルを分離しています：

```
lib/
├── main.dart                                  # エントリーポイント
│
├── models/                                    # データモデル層
│   ├── task.dart                             # Taskクラス、Priority enum
│   ├── label.dart                            # Labelクラス
│   ├── notification_timing.dart              # 通知タイミングモデル
│   ├── notification_set.dart                 # 通知セットモデル
│   └── app_settings.dart                     # アプリ設定モデル
│
├── services/                                  # ビジネスロジック層
│   ├── task_service.dart                     # タスク管理
│   ├── label_service.dart                    # ラベル管理
│   ├── notification_service.dart             # 通知管理
│   ├── notification_set_service.dart         # 通知セット管理
│   └── app_settings_service.dart             # アプリ設定管理
│
├── screens/                                   # 画面層
│   ├── task_board_screen.dart                # タスクボード画面（メイン）
│   ├── task_detail_screen.dart               # タスク詳細画面
│   ├── label_settings_screen.dart            # ラベル管理画面
│   ├── notification_set_settings_screen.dart # 通知セット管理画面
│   └── settings_screen.dart                  # アプリ設定画面
│
├── widgets/                                   # 再利用可能なUI部品
│   ├── task_card.dart                        # タスクカード表示
│   ├── add_task_dialog.dart                  # タスク追加ダイアログ
│   ├── edit_task_dialog.dart                 # タスク編集ダイアログ
│   └── label_chip.dart                       # ラベル表示チップ
│
└── utils/                                     # ユーティリティ
    └── logger.dart                           # カスタムログ
```

### 設計方針

- **単一責任の原則**: 各ファイルが1つの明確な役割を持つ
- **関心の分離**: データ、ロジック、UIを分離
- **再利用性**: ウィジェットを独立させ、他の画面でも使用可能に
- **テスタビリティ**: 各層が独立しているため、単体テストが容易
- **パフォーマンス最適化**: 
  - StatelessWidget化による描画効率向上
  - フィルタリング処理のキャッシュ化
  - 不要なSharedPreferences読み込みの削減

---

## 🚀 セットアップ方法

### 必要な環境
- Flutter SDK 3.0以上
- Dart 2.17以上
- Android Studio / VS Code
- Android端末 または エミュレータ（Android 8.0以上推奨）

### インストール手順

1. **リポジトリをクローン**
   ```bash
   git clone https://github.com/high6430/task-manager-app.git
   cd task-manager-app
   ```

2. **依存関係をインストール**
   ```bash
   flutter pub get
   ```

3. **アプリを起動**
   ```bash
   flutter run
   ```

4. **リリースビルド（APK生成）**
   ```bash
   flutter build apk --release
   # 生成されたAPK: build/app/outputs/flutter-apk/app-release.apk
   ```

---

## 📱 使い方

### タスクの追加
1. 右下の「+」ボタンをタップ
2. タイトル、詳細、締切日時、優先度を入力
3. ラベルを選択（複数選択可能）
4. 通知を設定（オプション）
5. 「追加」ボタンをタップ

### タスクの編集
1. タスクカードの「編集」ボタンをタップ
2. 内容を修正
3. 「保存」ボタンをタップ

### タスクの詳細表示
1. タスクカードを長押し
2. 詳細画面が表示される
3. 編集・完了・削除が可能

### タスクの移動
- 「進行中へ」ボタン: 未対応 → 進行中
- 「完了へ」ボタン: 進行中 → 完了
- 「未対応へ」ボタン: 進行中 → 未対応（戻す）

### タスクの削除
1. タスクカードの「削除」ボタンをタップ
2. 確認ダイアログで「削除」を選択

### ラベル管理
1. 右上のラベルアイコンをタップ
2. 「+」ボタンで新しいラベルを追加
3. ラベル名と色を選択
4. 削除する場合は各ラベルの削除アイコンをタップ

### ラベルフィルタ
1. タブの上にあるフィルタドロップダウンをタップ
2. 表示したいラベルを選択
3. 「すべて」を選択すると全タスクを表示

### 通知セットの管理
1. 右上の設定アイコンをタップ
2. 「通知セット管理」を選択
3. 「+」ボタンで新しい通知セットを作成
4. 名前と通知タイミングを設定
5. タスク追加・編集時に作成した通知セットを選択可能

### アプリ設定
1. 右上の設定アイコンをタップ
2. 「通知を有効にする」をON/OFFで一括制御
3. 通知権限・アラーム権限の状態を確認

---

## 🎯 開発目標

### 達成済み
✅ シンプルで操作しやすいUIの構築
✅ タスクのCRUD機能実装
✅ 優先度・締切順のソート機能
✅ タスクのステータス管理（3段階）
✅ ローカルデータの永続化
✅ タブUI実装
✅ タスク編集機能
✅ 削除確認ダイアログ
✅ 詳細（説明文）フィールド
✅ ラベル機能（作成・付与・フィルタリング）
✅ コードリファクタリング（保守性向上）
✅ 通知機能（Android 12以上対応）
✅ 通知セット機能（カスタム通知タイミング）
✅ 通知アクション（完了・詳細表示）
✅ パフォーマンス最適化
✅ ログ最適化（デバッグモードのみ出力）
✅ タスクカードの色分けバグ修正
✅ **Android 13対応（v1.0.1）**
✅ **編集画面ダイアログクローズ修正（v1.0.1）**

### 今後の予定
🔲 タスク検索機能
🔲 データのエクスポート/インポート機能
🔲 統計・分析機能（完了率、ラベル別グラフなど）
🔲 カレンダービューの追加
🔲 繰り返しタスク機能
🔲 テーマカスタマイズ・ダークモード対応

---

## 🎓 学習成果

本プロジェクトを通じて習得したスキル：

- Flutterのウィジェット構造と状態管理（StatefulWidget / StatelessWidget）
- ローカルデータ管理（SharedPreferences、JSON形式）
- 通知システムの実装（flutter_local_notifications）
- 権限管理（permission_handler）
- Android 13での正確なアラーム対応
- モバイル向けUI/UX設計（タブUI、フィルタリング、長押しアクション）
- Gitを用いたバージョン管理とブランチ戦略
- コードリファクタリングと保守性の高い設計
- パフォーマンス最適化（StatelessWidget化、キャッシュ化）
- ProGuard設定とリリースビルド最適化
- 企画から実装、テスト、デバッグまでの一連の開発プロセス
- デバッグとトラブルシューティング手法

---

## 👤 対象ユーザー（ペルソナ）

**名前**: 田中 健太（仮名）
**年齢**: 28歳
**職業**: フリーランスWebデザイナー

### 背景
複数のクライアント案件を同時進行しながら、個人プロジェクトやスキルアップのための学習も並行して進めている。プライベートでは趣味のイラスト制作やジム通いも継続したいと考えている。

### 課題
- 仕事、学習、趣味、プライベートのタスクが混在し、優先順位がつけづらい
- 既存のタスク管理アプリは機能が多すぎて使いこなせない
- 自分のワークスタイルに合わせてカスタマイズしたい

### ニーズ
- スマホで簡単にタスクを追加・確認・完了できる
- 自分なりのラベルで分類し、必要なタスクだけを表示したい
- 締切を忘れないように通知してほしい
- シンプルだけど必要な機能は揃っているアプリが欲しい

### このアプリを選ぶ理由
- 自分の管理スタイルに合わせてラベルをカスタマイズできる
- 通知タイミングも自由に設定できる
- シンプルな操作で直感的に使える
- オフラインでも使えるので場所を選ばない

---

## 📄 ライセンス

このプロジェクトはMITライセンスの下で公開されています。

---

## 📞 お問い合わせ

質問や提案がある場合は、[GitHubのIssues](https://github.com/high6430/task-manager-app/issues)からお願いします。

**開発者**: high6430  
**開発期間**: 2024年 - 2025年  
**用途**: IT専門学校 卒業制作

---

## 📝 更新履歴

### v1.0.1 (2025/12/05)

**🐛 バグ修正**
- Android 13で通知が来ていない問題を修正
  - SCHEDULE_EXACT_ALARM権限を自動リクエストするように改善
  - POST_NOTIFICATIONS権限の状態チェックをより詳細に
  - 権限状態をログ出力してトラブルシューティング性を向上

- タスクボード画面から編集時にダイアログが閉じない問題を修正
  - ダイアログコンテキストの明示化
  - Navigator.pop() を正確に実行するように改善

**📱 動作確認済み**
- Android 12での通知動作確認済み
- Android 13での権限取得確認（権限チェックログで確認）
- タスク編集・保存動作確認済み
- エラーなし

---

### v1.0.0 (2025/12/04)

**✨ 初版リリース**
- アプリ名を「PikaDo」に変更
- カスタムアイコンと起動画面を実装
- 通知機能実装完了（Android 12以上対応）
- 通知セット機能実装
- 通知アクション実装（完了・詳細表示）
- パフォーマンス最適化完了
- ログ最適化完了（デバッグモードのみ出力）
- タスクカードの色分けバグ修正

---

### v0.3.0 (2025/11/04)

**🏷️ ラベル機能**
- ラベル機能実装完了（作成・付与・フィルタリング）

---

### v0.2.0 (2025/10/30)

**✏️ タスク機能拡張**
- タスク編集機能、削除確認、詳細フィールド追加

---

### v0.1.0 (2025/10/27)

**🔧 コード最適化**
- コードリファクタリング完了（機能ごとにファイル分離、保守性向上）

---

### v0.0.1 (2025/10/23)

**🚀 プロジェクト初回リリース**

---

**Happy Task Managing with PikaDo! ⚡**
```